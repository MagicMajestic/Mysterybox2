{% extends "base.html" %}

{% block title %}Логи бота - MysteryBox Bot{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0"><i class="fas fa-file-alt"></i> Логи бота (последние 100 строк)</h5>
                <button class="btn btn-sm btn-primary" onclick="location.reload()">
                    <i class="fas fa-sync-alt"></i> Обновить
                </button>
            </div>
            <div class="card-body p-0">
                <div class="log-container" style="height: 600px; overflow-y: auto; background-color: #1e1e1e; color: #d4d4d4;">
                    {% if logs %}
                        {% for log in logs %}
                            <div class="log-line {% if 'ERROR' in log %}log-error{% elif 'WARNING' in log %}log-warning{% elif 'INFO' in log %}log-info{% endif %}">
                                {{ log.strip() }}
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-exclamation-triangle fa-3x text-muted mb-3"></i>
                            <h5>Логи не найдены</h5>
                            <p class="text-muted">Файл логов не найден или пуст</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Auto-scroll to bottom of logs
const logContainer = document.querySelector('.log-container');
if (logContainer) {
    logContainer.scrollTop = logContainer.scrollHeight;
}

// Auto-refresh logs every 10 seconds
setInterval(function() {
    location.reload();
}, 10000);
</script>
{% endblock %}